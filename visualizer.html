<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Page Replacement Visualizer</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
    >

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <style>
        :root {
            --bg-main: #020617;
            --bg-card: rgba(15, 23, 42, 0.9);
            --border-subtle: #1f2937;
            --text-main: #e5e7eb;
            --text-muted: #9ca3af;
            --accent: #facc15;
            --danger-soft: rgba(220, 38, 38, 0.16);
            --success-soft: rgba(34, 197, 94, 0.16);
        }

        *{font-family:"Inter",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;}

        body{
            background:
                radial-gradient(circle at top left,#1d4ed8 0,transparent 55%),
                radial-gradient(circle at bottom right,#22c55e 0,transparent 55%),
                var(--bg-main);
            min-height:100vh;
            color:var(--text-main);
        }

        .glass-card{
            background:var(--bg-card);
            border-radius:1.25rem;
            border:1px solid rgba(148,163,184,.3);
            box-shadow:0 18px 45px rgba(0,0,0,.65),0 0 0 1px rgba(15,23,42,.9);
            backdrop-filter:blur(18px);
            -webkit-backdrop-filter:blur(18px);
            transition:transform .16s ease,box-shadow .16s ease,border-color .16s ease;
        }
        .glass-card:hover{
            transform:translateY(-2px);
            box-shadow:0 22px 60px rgba(0,0,0,.85),0 0 0 1px rgba(148,163,184,.5);
            border-color:rgba(250,204,21,.6);
        }

        .chip{
            border-radius:999px;
            border:1px solid rgba(148,163,184,.5);
            padding:.25rem .75rem;
            font-size:.75rem;
            text-transform:uppercase;
            letter-spacing:.12em;
            color:var(--text-muted);
            background:rgba(15,23,42,.7);
        }
        .chip-accent{
            border-color:rgba(250,204,21,.75);
            color:var(--accent);
            background:rgba(250,204,21,.1);
        }

        h1{
            font-weight:800;
            letter-spacing:.16em;
            text-transform:uppercase;
            font-size:1.7rem;
        }
        .subtitle{
            max-width:640px;
            margin:0 auto;
            font-size:.92rem;
        }

        label.form-label{
            font-size:.82rem;
            text-transform:uppercase;
            letter-spacing:.08em;
            color:var(--text-muted);
            margin-bottom:.25rem;
        }
        .form-control{
            background:#020617;
            color:var(--text-main);
            border-color:var(--border-subtle);
            border-radius:.9rem;
            font-size:.9rem;
        }
        .form-control:focus{
            background:#020617;
            color:var(--text-main);
            border-color:rgba(250,204,21,.7);
            box-shadow:0 0 0 1px rgba(250,204,21,.6);
        }

        .btn-run{
            border-radius:999px;
            font-weight:600;
            letter-spacing:.16em;
            text-transform:uppercase;
            font-size:.78rem;
            padding:.7rem 1.9rem;
            border:none;
            background:linear-gradient(135deg,#f97316,#facc15);
            color:#111827;
            box-shadow:0 13px 35px rgba(250,204,21,.4);
            transition:transform .16s ease,box-shadow .16s ease,filter .16s ease;
        }
        .btn-run:hover{
            transform:translateY(-1px);
            filter:brightness(1.03);
            box-shadow:0 18px 45px rgba(250,204,21,.55);
        }

        /* navbar */
        .nav-main{
            backdrop-filter:blur(16px);
            -webkit-backdrop-filter:blur(16px);
            background:rgba(15,23,42,.85);
            border-radius:999px;
            border:1px solid rgba(148,163,184,.35);
            padding-inline:1.25rem;
        }
        .nav-main a{
            color:var(--text-muted);
            font-size:.8rem;
            letter-spacing:.12em;
            text-transform:uppercase;
        }
        .nav-main a:hover{color:var(--accent);}
        .nav-main .brand{
            font-weight:700;
            color:var(--accent);
            letter-spacing:.18em;
        }
        .nav-main .active{color:var(--accent);}

        /* tabs & table, KPIs, slider, etc.  (same as previous version) */

        .nav-tabs{border-bottom:1px solid rgba(148,163,184,.28);}
        .nav-tabs .nav-link{
            border:none;
            color:var(--text-muted);
            background:transparent;
            font-size:.85rem;
            text-transform:uppercase;
            letter-spacing:.08em;
            padding:.75rem 1.2rem;
            position:relative;
        }
        .nav-tabs .nav-link::after{
            content:"";
            position:absolute;
            left:18px;
            right:18px;
            bottom:0;
            height:2px;
            background:transparent;
            border-radius:999px;
            transition:background .18s ease,transform .18s ease;
            transform:scaleX(0);
        }
        .nav-tabs .nav-link:hover{color:#e5e7eb;}
        .nav-tabs .nav-link.active{
            color:var(--accent);
            background:rgba(15,23,42,.6);
        }
        .nav-tabs .nav-link.active::after{
            background:linear-gradient(90deg,#f97316,#facc15);
            transform:scaleX(1);
        }
        .badge-algo{
            font-size:.7rem;
            letter-spacing:.08em;
            border-radius:999px;
            padding:.2rem .6rem;
            background:rgba(15,23,42,.85);
            border:1px solid rgba(148,163,184,.5);
            text-transform:uppercase;
        }

        .algo-header{display:flex;justify-content:space-between;align-items:center;gap:.75rem;flex-wrap:wrap;margin-bottom:.75rem;}
        .kpi-row{display:flex;gap:.5rem;flex-wrap:wrap;font-size:.8rem;}
        .kpi-pill{
            border-radius:999px;
            padding:.32rem .85rem;
            display:inline-flex;
            align-items:center;
            gap:.4rem;
            border:1px solid rgba(148,163,184,.4);
            background:rgba(15,23,42,.8);
        }
        .kpi-label{color:var(--text-muted);text-transform:uppercase;letter-spacing:.09em;font-size:.64rem;}
        .kpi-value{font-weight:600;}
        .kpi-pill.danger{background:var(--danger-soft);}
        .kpi-pill.success{background:var(--success-soft);}

        .table-container{border-radius:.9rem;overflow:hidden;border:1px solid rgba(31,41,55,.95);}
        .table-dark{--bs-table-bg:#020617;--bs-table-striped-bg:#020617;--bs-table-striped-color:#e5e7eb;font-size:.8rem;}
        .table-dark thead{background:linear-gradient(90deg,rgba(15,23,42,.98),rgba(30,64,175,.6));}
        .table-dark thead th{
            border-bottom-color:rgba(55,65,81,.9);
            text-transform:uppercase;
            letter-spacing:.08em;
            font-size:.7rem;
            color:#9ca3af;
        }
        .table-dark tbody tr{transition:background .12s ease,transform .05s ease;}
        .table-dark tbody tr:hover{background-color:rgba(15,23,42,.95);transform:translateY(-1px);}

        .fault-yes{background:var(--danger-soft);position:relative;}
        .fault-yes::before{
            content:"";
            position:absolute;
            left:0;top:6px;bottom:6px;
            width:3px;
            border-radius:999px;
            background:linear-gradient(180deg,#ef4444,#f97316);
        }
        .fault-no{background:var(--success-soft);}
        .fault-pill{
            border-radius:999px;
            padding:.15rem .6rem;
            font-size:.7rem;
            font-weight:500;
        }
        .fault-pill.yes{
            background:rgba(239,68,68,.18);
            color:#fecaca;
            border:1px solid rgba(248,113,113,.85);
        }
        .fault-pill.no{
            background:rgba(22,163,74,.22);
            color:#bbf7d0;
            border:1px solid rgba(52,211,153,.95);
        }

        .step-highlight{box-shadow:0 0 0 1px rgba(250,204,21,.9) inset;position:relative;z-index:1;}
        .step-highlight td{background-color:rgba(250,204,21,.08);}
        .form-range{accent-color:#facc15;}

        #faultChart{max-height:260px;}
        .chart-legend-note{font-size:.75rem;color:var(--text-muted);}
        .summary-highlight{font-size:.95rem;}
        .summary-highlight strong{color:var(--accent);}
        footer{color:var(--text-muted);}
    </style>
</head>
<body>
<div class="container py-4 py-md-5">

    <!-- NAVBAR -->
    <div class="d-flex justify-content-center mb-4">
        <div class="nav-main d-flex align-items-center justify-content-between w-100" style="max-width:900px;">
            <span class="brand small">OS · PAGE REPLACEMENT</span>
            <div class="d-flex gap-3">
                <a href="index.html" class="text-decoration-none">Home</a>
                <a href="visualizer.html" class="active text-decoration-none">Visualizer</a>
                <a href="theory.html" class="text-decoration-none">Theory</a>
            </div>
        </div>
    </div>

    <div class="d-flex flex-column align-items-center mb-4">
        <div class="mb-2">
            <span class="chip chip-accent">Interactive Simulation</span>
        </div>
        <h1 class="text-center mb-2 text-warning">
            Page Replacement Visualizer
        </h1>
        <p class="text-center mb-1 subtitle text-secondary">
            Enter any page reference string and instantly compare FIFO, LRU and Optimal with synced step-by-step views.
        </p>
    </div>

    <!-- Input Card -->
    <div class="glass-card mb-4">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
                <h5 class="card-title mb-0">Simulation Settings</h5>
                <span class="chip">Change frames &amp; string, then run again.</span>
            </div>

            <div class="row g-3">
                <div class="col-md-3">
                    <label class="form-label">Number of Frames</label>
                    <input type="number" id="framesInput" class="form-control" min="1" max="20" value="3">
                </div>
                <div class="col-md-9">
                    <label class="form-label">
                        Page Reference String
                        <span class="text-secondary">(space separated)</span>
                    </label>
                    <input
                        type="text"
                        id="pagesInput"
                        class="form-control"
                        value="7 0 1 2 0 3 0 4 2 3 0 3 2"
                    >
                </div>
            </div>
            <div class="d-flex justify-content-end mt-3">
                <button id="runBtn" class="btn btn-run">
                    Run Simulation
                </button>
            </div>
        </div>
    </div>

    <!-- Step Slider -->
    <div id="stepSliderContainer" class="glass-card mb-3 d-none">
        <div class="card-body py-3">
            <div class="d-flex flex-column flex-md-row align-items-md-center gap-3">
                <div>
                    <div class="card-title mb-1">Step Sync Viewer</div>
                    <small class="text-secondary">
                        Move the slider to jump to a specific reference step in <strong>all</strong> algorithms.
                    </small>
                </div>
                <div class="flex-grow-1">
                    <label class="form-label mb-1">
                        Highlight Step:
                        <span id="stepNumberDisplay">1</span>/<span id="stepTotalDisplay">–</span>
                    </label>
                    <input type="range" id="stepSlider" class="form-range" min="1" max="1" value="1">
                </div>
            </div>
        </div>
    </div>

    <!-- Tabs for Algorithms -->
    <ul class="nav nav-tabs mb-3" id="algoTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="fifo-tab" data-bs-toggle="tab"
                    data-bs-target="#fifo-pane" type="button" role="tab">
                FIFO <span class="badge-algo ms-1">First In First Out</span>
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="lru-tab" data-bs-toggle="tab"
                    data-bs-target="#lru-pane" type="button" role="tab">
                LRU <span class="badge-algo ms-1">Least Recently Used</span>
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="opt-tab" data-bs-toggle="tab"
                    data-bs-target="#opt-pane" type="button" role="tab">
                Optimal <span class="badge-algo ms-1">MIN Algorithm</span>
            </button>
        </li>
    </ul>

    <!-- Tab Panes (same content as before) -->
    <!-- FIFO -->
    <div class="tab-content mb-4" id="algoTabsContent">
        <div class="tab-pane fade show active" id="fifo-pane" role="tabpanel">
            <div class="glass-card">
                <div class="card-body">
                    <div class="algo-header">
                        <h5 class="card-title mb-0">FIFO Simulation</h5>
                        <div class="kpi-row">
                            <div class="kpi-pill danger">
                                <span class="kpi-label">Page Faults</span>
                                <span class="kpi-value" id="fifoFaults">–</span>
                            </div>
                            <div class="kpi-pill success">
                                <span class="kpi-label">Hits</span>
                                <span class="kpi-value" id="fifoHits">–</span>
                            </div>
                            <div class="kpi-pill">
                                <span class="kpi-label">Fault Rate</span>
                                <span class="kpi-value" id="fifoRate">–</span>
                            </div>
                        </div>
                    </div>
                    <p class="text-secondary small mb-2">
                        <strong>FIFO</strong> replaces the page that entered memory first, regardless of recent usage.
                    </p>
                    <div class="table-responsive table-container mt-2">
                        <table class="table table-dark table-striped table-sm align-middle mb-0" id="fifoTable"></table>
                    </div>
                </div>
            </div>
        </div>

        <!-- LRU -->
        <div class="tab-pane fade" id="lru-pane" role="tabpanel">
            <div class="glass-card">
                <div class="card-body">
                    <div class="algo-header">
                        <h5 class="card-title mb-0">LRU Simulation</h5>
                        <div class="kpi-row">
                            <div class="kpi-pill danger">
                                <span class="kpi-label">Page Faults</span>
                                <span class="kpi-value" id="lruFaults">–</span>
                            </div>
                            <div class="kpi-pill success">
                                <span class="kpi-label">Hits</span>
                                <span class="kpi-value" id="lruHits">–</span>
                            </div>
                            <div class="kpi-pill">
                                <span class="kpi-label">Fault Rate</span>
                                <span class="kpi-value" id="lruRate">–</span>
                            </div>
                        </div>
                    </div>
                    <p class="text-secondary small mb-2">
                        <strong>LRU</strong> removes the page that has not been used for the longest time in the past.
                    </p>
                    <div class="table-responsive table-container mt-2">
                        <table class="table table-dark table-striped table-sm align-middle mb-0" id="lruTable"></table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Optimal -->
        <div class="tab-pane fade" id="opt-pane" role="tabpanel">
            <div class="glass-card">
                <div class="card-body">
                    <div class="algo-header">
                        <h5 class="card-title mb-0">Optimal Simulation</h5>
                        <div class="kpi-row">
                            <div class="kpi-pill danger">
                                <span class="kpi-label">Page Faults</span>
                                <span class="kpi-value" id="optFaults">–</span>
                            </div>
                            <div class="kpi-pill success">
                                <span class="kpi-label">Hits</span>
                                <span class="kpi-value" id="optHits">–</span>
                            </div>
                            <div class="kpi-pill">
                                <span class="kpi-label">Fault Rate</span>
                                <span class="kpi-value" id="optRate">–</span>
                            </div>
                        </div>
                    </div>
                    <p class="text-secondary small mb-2">
                        <strong>Optimal (MIN)</strong> looks into the future and replaces the page whose next use is farthest away.
                    </p>
                    <div class="table-responsive table-container mt-2">
                        <table class="table table-dark table-striped table-sm align-middle mb-0" id="optTable"></table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Summary + Chart Row -->
    <div class="row g-3 mb-4">
        <div class="col-md-5">
            <div class="glass-card h-100">
                <div class="card-body">
                    <h5 class="card-title mb-2">Summary Insight</h5>
                    <p id="summaryText" class="summary-highlight mb-2">
                        Run the simulation to compare algorithms.
                    </p>

                    <div class="row g-2 mt-2">
                        <div class="col-6">
                            <div class="kpi-pill w-100">
                                <div>
                                    <div class="kpi-label">Total References</div>
                                    <div class="kpi-value" id="totalRefs">–</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="kpi-pill w-100">
                                <div>
                                    <div class="kpi-label">Unique Pages</div>
                                    <div class="kpi-value" id="uniquePages">–</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 mt-2">
                            <div class="chip w-100 text-center" id="bestAlgoChip">
                                Best algorithm will appear here after running.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-7">
            <div class="glass-card h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-2 flex-wrap gap-2">
                        <h5 class="card-title mb-0">Page Fault Comparison</h5>
                        <span class="chart-legend-note">
                            Lower bars are better. Optimal is the theoretical lower bound.
                        </span>
                    </div>
                    <canvas id="faultChart" height="110"></canvas>
                </div>
            </div>
        </div>
    </div>

    <footer class="text-center text-secondary small mb-0">
        Built for Operating Systems Lab · Visualizer Page · Created by <strong>Luvkesh</strong> &amp; <strong>Abhijeet</strong>
    </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    function parsePages(input){
        return input.trim().split(/\s+/).map(Number).filter(v => !Number.isNaN(v));
    }

    function simulateFIFO(pages,framesCount){
        const frames=new Array(framesCount).fill(null);
        let nextToReplace=0,faults=0;
        const steps=[];
        pages.forEach((page,idx)=>{
            const hit=frames.includes(page);
            if(!hit){
                faults++;
                if(frames.includes(null)){
                    frames[frames.indexOf(null)]=page;
                }else{
                    frames[nextToReplace]=page;
                    nextToReplace=(nextToReplace+1)%framesCount;
                }
            }
            steps.push({step:idx+1,page,frames:[...frames],fault:!hit});
        });
        return{steps,faults};
    }

    function simulateLRU(pages,framesCount){
        const frames=new Array(framesCount).fill(null);
        const lastUsed=new Array(framesCount).fill(-1);
        let faults=0;
        const steps=[];
        pages.forEach((page,idx)=>{
            let hitIndex=frames.indexOf(page);
            let hit=hitIndex!==-1;
            if(hit){
                lastUsed[hitIndex]=idx;
            }else{
                faults++;
                const emptyIndex=frames.indexOf(null);
                if(emptyIndex!==-1){
                    frames[emptyIndex]=page;
                    lastUsed[emptyIndex]=idx;
                }else{
                    let lruIndex=0,minTime=lastUsed[0];
                    for(let i=1;i<framesCount;i++){
                        if(lastUsed[i]<minTime){minTime=lastUsed[i];lruIndex=i;}
                    }
                    frames[lruIndex]=page;
                    lastUsed[lruIndex]=idx;
                }
            }
            steps.push({step:idx+1,page,frames:[...frames],fault:!hit});
        });
        return{steps,faults};
    }

    function simulateOptimal(pages,framesCount){
        const frames=new Array(framesCount).fill(null);
        let faults=0;
        const steps=[];
        for(let i=0;i<pages.length;i++){
            const page=pages[i];
            let hit=frames.includes(page);
            if(!hit){
                faults++;
                const emptyIndex=frames.indexOf(null);
                if(emptyIndex!==-1){
                    frames[emptyIndex]=page;
                }else{
                    let farthestIndex=-1,farthestDistance=-1;
                    for(let f=0;f<framesCount;f++){
                        const currentPage=frames[f];
                        let nextUse=Infinity;
                        for(let j=i+1;j<pages.length;j++){
                            if(pages[j]===currentPage){nextUse=j;break;}
                        }
                        if(nextUse>farthestDistance){
                            farthestDistance=nextUse;
                            farthestIndex=f;
                        }
                    }
                    frames[farthestIndex]=page;
                }
            }
            steps.push({step:i+1,page,frames:[...frames],fault:!hit});
        }
        return{steps,faults};
    }

    function renderTable(tableElement,result,framesCount){
        let html="<thead><tr><th>Step</th><th>Page</th>";
        for(let i=0;i<framesCount;i++){html+=`<th>Frame ${i+1}</th>`;}
        html+="<th>Fault</th></tr></thead><tbody>";
        result.steps.forEach(row=>{
            html+=`<tr data-step="${row.step}" class="${row.fault?'fault-yes':'fault-no'}">`;
            html+=`<td>${row.step}</td><td>${row.page}</td>`;
            for(let i=0;i<framesCount;i++){
                const val=row.frames[i];
                html+=`<td>${val===null?'-':val}</td>`;
            }
            html+=`<td><span class="fault-pill ${row.fault?'yes':'no'}">${row.fault?'Fault':'Hit'}</span></td></tr>`;
        });
        html+="</tbody>";
        tableElement.innerHTML=html;
    }

    function highlightStep(step){
        ['fifoTable','lruTable','optTable'].forEach(id=>{
            const table=document.getElementById(id);
            if(!table)return;
            table.querySelectorAll('tbody tr').forEach(tr=>tr.classList.remove('step-highlight'));
            const target=table.querySelector(`tbody tr[data-step="${step}"]`);
            if(target){
                target.classList.add('step-highlight');
                const container=table.closest('.table-responsive');
                if(container){
                    const top=target.offsetTop-40;
                    container.scrollTo({top,behavior:'smooth'});
                }
            }
        });
        document.getElementById('stepNumberDisplay').textContent=step;
    }

    let faultChart=null;
    function updateChart(fifoFaults,lruFaults,optFaults){
        const ctx=document.getElementById('faultChart');
        if(faultChart){faultChart.destroy();}
        faultChart=new Chart(ctx,{
            type:'bar',
            data:{
                labels:['FIFO','LRU','Optimal'],
                datasets:[{
                    label:'Page Faults',
                    data:[fifoFaults,lruFaults,optFaults],
                    borderRadius:12,
                    backgroundColor:[
                        'rgba(248,113,113,.85)',
                        'rgba(56,189,248,.9)',
                        'rgba(52,211,153,.9)'
                    ]
                }]
            },
            options:{
                responsive:true,
                plugins:{legend:{display:false},tooltip:{enabled:true}},
                scales:{
                    x:{ticks:{color:'#e5e7eb',font:{size:11}},grid:{display:false}},
                    y:{ticks:{color:'#e5e7eb',font:{size:11}},grid:{color:'#1f2937'},beginAtZero:true,precision:0}
                },
                animation:{duration:700,easing:'easeOutCubic'}
            }
        });
    }

    function updateKPI(prefix,faults,total){
        const hits=total-faults;
        const rate=total>0?((faults/total)*100).toFixed(1)+'%':'–';
        document.getElementById(prefix+'Faults').textContent=faults;
        document.getElementById(prefix+'Hits').textContent=hits;
        document.getElementById(prefix+'Rate').textContent=rate;
    }

    function updateSummary(pages,fifoFaults,lruFaults,optFaults){
        const total=pages.length;
        const unique=new Set(pages).size;
        document.getElementById('totalRefs').textContent=total;
        document.getElementById('uniquePages').textContent=unique;
        const algos=[
            {id:'FIFO',faults:fifoFaults},
            {id:'LRU',faults:lruFaults},
            {id:'Optimal',faults:optFaults}
        ];
        algos.sort((a,b)=>a.faults-b.faults);
        const best=algos[0];
        document.getElementById('summaryText').innerHTML=
            `For this reference string of <strong>${total}</strong> pages (${unique} unique), the <strong>${best.id}</strong> algorithm gives the least page faults (<strong>${best.faults}</strong>).`;
        const chip=document.getElementById('bestAlgoChip');
        chip.innerHTML=`Best for this input: <strong>${best.id}</strong> with <strong>${best.faults}</strong> faults.`;
        chip.classList.add('chip-accent');
    }

    const stepSlider=document.getElementById('stepSlider');
    stepSlider.addEventListener('input',e=>{
        const step=parseInt(e.target.value,10);
        if(!Number.isNaN(step)) highlightStep(step);
    });

    document.getElementById('runBtn').addEventListener('click',()=>{
        const framesCount=parseInt(document.getElementById('framesInput').value,10);
        const pages=parsePages(document.getElementById('pagesInput').value);
        if(!framesCount||framesCount<=0){alert("Please enter a valid number of frames.");return;}
        if(pages.length===0){alert("Please enter a valid page reference string.");return;}

        const fifoRes=simulateFIFO(pages,framesCount);
        const lruRes=simulateLRU(pages,framesCount);
        const optRes=simulateOptimal(pages,framesCount);

        renderTable(document.getElementById('fifoTable'),fifoRes,framesCount);
        renderTable(document.getElementById('lruTable'),lruRes,framesCount);
        renderTable(document.getElementById('optTable'),optRes,framesCount);

        updateKPI('fifo',fifoRes.faults,pages.length);
        updateKPI('lru',lruRes.faults,pages.length);
        updateKPI('opt',optRes.faults,pages.length);

        updateChart(fifoRes.faults,lruRes.faults,optRes.faults);
        updateSummary(pages,fifoRes.faults,lruRes.faults,optRes.faults);

        const sliderContainer=document.getElementById('stepSliderContainer');
        sliderContainer.classList.remove('d-none');
        stepSlider.max=pages.length;
        stepSlider.value=1;
        document.getElementById('stepTotalDisplay').textContent=pages.length;
        highlightStep(1);
    });

    window.addEventListener('load',()=>document.getElementById('runBtn').click());
</script>
</body>
</html>
